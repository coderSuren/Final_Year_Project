<!DOCTYPE html>
<html>	
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" contingent="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>NFT TCG</title>
		<script src="js/jquery.min.js"></script>
		<link rel="stylesheet" href="css/animate.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"></link>
		<script src='js/game.js'></script>
		
		<link rel="stylesheet" type="text/css" href="css/game.css">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- [if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class='jumbotron' id='jumbotron'>
			<h1 class='animated flipInX'>NFT TCG</h1>
		</div><!-- end jumbotron div -->

		<div id='header' style="display: none;">
			<h3>NFT TCG</h3>
		</div><!-- end header -->

		<div id="boardwrap">

			<div id='howToPlay'>
				<h2><u>How To Play</u></h2>

				<div id="howTo">
					<div>The game is simple. Draw one card and compare it against the computer's. Highest card wins, and winner takes both cards. Play until one person has all of the cards.</div>
					
				</div><!-- End howTo div -->

				<div><button id='playButton' onclick="play()">PLAY!</button></div>
			</div><!-- End howToPlay div -->

			<div id="warAnimation" class="war"><div id="warText">WAR!!!</div></div>

			<div id="warArea" style='display: none;'>
				<div class='playerWarFinal'></div>
				<div class='playerWarCards'></div>
				<div class='compWarCards'></div>
				<div class='compWarFinal'></div>
			</div><!-- End warArea div -->
			
			<div id='gameboard'>
				<div id='desktop' class="game animated fadeInUp">
					
					<div class="gameHeader">
						<div class="playCount"></div>
						<div class="result"></div>
						<div class="compCount"></div>
					</div><!--End gameHeader div -->
					
					<div class="gameTable">
						<div class="playerDeck"><img src="img/cardback.jpg"></div>
						<div class="playerCard"></div>
						<div class="middleGround">
							<button class="deal" onclick="deal()">DEAL</button><br>
							<button class="newGame" onclick="location.reload()">NEW GAME</button>
						</div><!-- End middleGround div -->
						<div class="compCard"></div>
						<div class="compDeck"><img src="img/cardback.jpg"></div>
					</div><!-- End gameTable div -->
				</div><!-- End desktop div -->

				<div id='mobile' class="game animated fadeInLeft">
					<div class="playCount"></div><br>
					<div class="playerArea">
						<div class="playerDeck"><img src="img/cardback.jpg"></div>
						<div class="playerCard"></div>
					</div><!-- End playerArea div -->

					<div class="result"></div><br>
					<div class="middleGround">
						<button class="deal" onclick="deal()">DEAL</button><br>
						
						<button class="newGame" onclick="location.reload()">NEW GAME</button>
					</div><br><!-- End middleGround div -->
					
					<div class="compCount"></div>
					<div class="compArea">
						<div class="compDeck"><img src="img/cardback.jpg"></div>
						<div class="compCard"></div>
					</div><!-- End compArea div -->
				</div><!-- End mobile div -->
			</div><!-- End gameboard div -->

		</div><!-- End boardwrap div -->

		<script>
			async function connect() 
			{
				if (window.ethereum) {
					await window.ethereum.request({ method: "eth_requestAccounts" });
					window.web3 = new Web3(window.ethereum);
					const account = web3.eth.accounts;
					const walletAddress = account.givenProvider.selectedAddress;
					console.log(`Wallet: ${walletAddress}`);
					window.location.href = `/setup?wallet=${walletAddress}`;
				} 
				else {
					alert("MetaMask is not installed");
				}
			}
			connect();
		</script>
	</body>
</html>